@{
    Layout = null;

}
@model RepairedViewModel
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>提交表单</title>
    <link href="~/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="~/css/Repaired.css" rel="stylesheet">
</head>

<body>
    <header>
        <nav class=" fixed-top bg-light ">
            @*<div class=" head_title  text-center">
                    <span class="font-weight-bold">故障报修</span>
                </div>*@

            <div class="">

                <ul class="nav justify-content-center" id="nav">
                    <li class="nav-item">
                        <a asp-action="Index" asp-controller="Repaired" class="nav-link font_ns ">维修汇总</a>
                    </li>
                    <li class="nav-item">
                        <a asp-action="Remade" asp-controller="Repaired" class="nav-link  font_ns">维修状态</a>
                    </li>
                    <li class="nav-item">
                        <a asp-action="AddTable" asp-controller="Repaired" class="nav-link  font_s">提交表单</a>
                        <hr>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <form asp-action="AddTable" asp-controller="Repaired" method="post">

        <div class=" bg-light info">
            <div class="info_u">
                <div class="input-group">

                    <input type="text" class="form-control rounded-0 border-0 bg-light" placeholder="具体信息" id="usr"
                           readonly>
                </div>

                <div class=" input-group flex-nowrap info_item">
                    <div class="input-group-prepend ">
                        <span class="input-group-text bg-white rounded-0 border-0" id="addon-wrapping">设备编号</span>
                    </div>
                    <input type="text" class="form-control border-0" id="input_code" value="请输入设备编号"
                           aria-describedby="addon-wrapping" asp-for="CreatNumber">
                </div>

                <div class="input-group flex-nowrap info_item">
                    <div class="input-group-prepend ">
                        <span class="input-group-text bg-white rounded-0 border-0" id="addon-wrapping">设备名称</span>
                    </div>
                    <select asp-for="AssetsId" class="custom-select rounded-0 border-0" asp-items="ViewBag.AssetsId">
                        <option selected disabled>请选择设备名称</option>
                    </select>
                </div>

                <div class="input-group mb-3 info_item">
                    <div class="input-group-prepend">
                        <label class="input-group-text bg-white rounded-0 border-0" for="inputGroupSelect01">使用部门</label>
                    </div>

                    <select asp-for="DepartmentId" class=" custom-select rounded-0 border-0" id="inputGroupSelect01" asp-items="ViewBag.DepartmentId">
                        <option selected disabled>请选择使用部门</option>
                    </select>
                </div>
            </div>

            <div class=" info_m ">
                <div class="input-group flex-nowrap info_item">
                    <div class="input-group-prepend ">
                        <span class="input-group-text bg-white rounded-0 border-0" id="addon-wrapping">设备型号</span>
                    </div>
                    <input type="text" class="form-control border-0" placeholder="请输入设备型号"
                           aria-describedby="addon-wrapping" asp-for="CreatNumber">
                </div>
                <div class="input-group flex-nowrap info_item">
                    <div class="input-group-prepend ">
                        <span class="input-group-text bg-white rounded-0 border-0" id="addon-wrapping">故障发生时间</span>
                    </div>
                    <input class="form-control border-0" placeholder="请输入故障发生时间"
                           aria-describedby="addon-wrapping" asp-for="BrokenTime">
                </div>
            </div>

            <div class=" info_m ">

                <div class="input-group flex-nowrap info_item">
                    <div class="input-group-prepend ">
                        <span class="input-group-text bg-white rounded-0 border-0" id="addon-wrapping">维修起始</span>
                    </div>
                    <input class="form-control border-0" placeholder="请输入维修开始时间"
                           aria-describedby="addon-wrapping" asp-for="StartTime">
                </div>
                <div class="input-group flex-nowrap info_item">
                    <div class="input-group-prepend ">
                        <span class="input-group-text bg-white rounded-0 border-0" id="addon-wrapping">维修结束</span>
                    </div>
                    <input class="form-control border-0" placeholder="请输入维修结束时间"
                           aria-describedby="addon-wrapping" asp-for="EndTime">
                </div>
            </div>

            <div class=" info_m">
                <div class="input-group flex-nowrap info_item">
                    <div class="input-group-prepend ">
                        <span class="input-group-text bg-white rounded-0 border-0" id="addon-wrapping">维修人员</span>
                    </div>
                    <input type="text" class="form-control border-0" id="input_name" value="请输入维修人员名字" aria-label="Username"
                           aria-describedby="addon-wrapping" asp-for="Workers">
                </div>
            </div>
            <div class=" info_m">
                <div class="input-group flex-nowrap info_item">
                    <div class="input-group-prepend ">
                        <span class="input-group-text bg-white rounded-0 border-0" id="addon-wrapping">故障原因</span>
                    </div>
                    <input type="text" class="form-control border-0" placeholder="请输入原因" aria-label="Username"
                           aria-describedby="addon-wrapping" asp-for="Reason">
                </div>
            </div>

            <div class=" info_m">
                <input type="submit" class=" btn-lg btn-primary " style="width: 92%; margin-left: 4%; background:#005fe0;" value="提交" />
                @*<button class=" btn-lg btn-primary " style="width: 92%; margin-left: 3%; background:#005fe0;">提交</button>*@
            </div>
        </div>
    </form>

    <footer>
        <nav class=" fixed-bottom text-center bg-white">

            <a asp-action="homepage" asp-controller="home">
                <div id="footer_h">

                    <img src="../img/home.png">

                    <div class=" footer_text">
                        主页
                    </div>
                </div>
            </a>

            <a asp-action="Index" asp-controller="Repaired">
                <div id="footer_f">
                    <img src="../../img/fault-selected.png">
                    <div class=" footer_text">
                        维修
                    </div>
                </div>
            </a>
            <a asp-action="sentcheck" asp-controller="check" asp-route-id="2020">
                <div class="" id="footer_m">
                    <img src="../../img/repair.png">
                    <div class="footer_text">
                        点检
                    </div>
                </div>
            </a>

            <a asp-action="index" asp-controller="Set">
                <div class="  " id="footer_l">
                    <img src="../../img/setup.png">
                    <div class=" footer_text">
                        设置
                    </div>
                </div>
            </a>
        </nav>
    </footer>

    <script src="~/jquery/jquery.min.js"></script>
    <script src="~/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="~/bootstrap/bootstrap.min.js"></script>
    <script src="https://g.alicdn.com/dingding/dingtalk-jsapi/2.10.3/dingtalk.open.js"></script>

    <script type="text/javascript">

        dd.ready(function () {
            // dd.ready参数为回调函数，在环境准备就绪时触发，jsapi的调用需要保证在该回调函数触发后调用，否则无效。

            dd.runtime.permission.requestAuthCode({
                corpId: "ding2161b7c4713eabce4ac5d6980864d335",
                onSuccess: function (result) {
                    //通过corpId，code获取userid,code为string类型
                    var code = result.code;
                    //alert(code)

                    $.ajax({
                        async: false,
                        type: 'get',
                        contentType: "application/json;charset=UTF-8",
                        datatype: "json",
                        data: { "code": code },
                        url: '/DingTalk/GetUserInfo',
                        success: function (ref) {
                            alert(ref),

                                // 开始写 jQuery 代码...
                                $("#input_name").val(ref["name"])

                        },
                    })

                },

                onFail: function (err) {
                    alert(JSON.stringify(err));

                }

            });
            $("#input_code").focus(function () {
                dd.biz.util.scan({
                    type: "all", // type 为 all、qrCode、barCode，默认是all。
                    onSuccess: function (data) {
                        alert("扫码成功")

                        $("#input_code").val(data.text)
                    },
                    onFail: function (err) {
                        alert(err)
                    }
                })
            })

        });
    </script>

    <!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
    </script> -->
</body>
</html>